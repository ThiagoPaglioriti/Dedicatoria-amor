<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sorpresa</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body class="page page-lock" onclick="mostrarTexto(event)">
      <main class="center">
        <h1 class="title">Ingresa la fecha correcta...</h1>

          <div class="lock-card">
            <!--Background (3d)-->
            <div class="bg_heart">
            </div>
                    <!-- Fondo animado de corazones (vanilla JS, sin jQuery) -->
        <script>
        (function() {
        const container = document.querySelector('.bg_heart');
        if (!container) return;

        function makeHeart() {
        // ‚öôÔ∏è Valores aleatorios con leve ajuste de velocidad
        const rSize = Math.floor(Math.random() * 50) + 10; // 10‚Äì60px
        const rLeft = Math.floor(Math.random() * 100);
        const rBg = Math.floor(Math.random() * 40) + 120;
        const rTime = Math.floor(Math.random() * 4) + 4; // 4‚Äì8s (antes 5‚Äì10s)
        const rScale = 1 + Math.random() * 0.3;
        const rRotate = -45 + (Math.random() * 10 - 5);

        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.style.width = `${rSize}px`;
        heart.style.height = `${rSize}px`;
        heart.style.left = `${rLeft}%`;
        heart.style.background = `rgba(255,${rBg-25},${rBg},1)`;
        heart.style.animationDuration = `${rTime}s`;
        heart.style.transform = `rotate(${rRotate}deg) scale(${rScale})`;

        container.appendChild(heart);

        // üßπ Limpieza autom√°tica al finalizar la animaci√≥n
        heart.addEventListener('animationend', () => heart.remove());
        }

        // üíó Generar corazones cada 0.6s
        const loveInterval = setInterval(makeHeart, 600);
        window.addEventListener('beforeunload', () => clearInterval(loveInterval));
        })();
      </script>
          <!-- candado simple con SVG -->
          <div class="lock-art">
              <svg viewBox="0 0 200 200" class="heart-lock">
                  <defs>
                      <linearGradient id="g1" x1="0" x2="1">
                          <stop offset="0" stop-color="#ffb3d1"/>
                          <stop offset="1" stop-color="#ff6fa8"/>
                      </linearGradient>
                  </defs>
                  <path d="M100 160 L40 100 A30 30 0 1 1 100 60 A30 30 0 1 1 160 100 Z" fill="url(#g1)" stroke="#ff4f8a" stroke-width="3"/>
                  <!-- combinacion area -->
                  <rect x="45" y="70" width="110" height="60" rx="8" ry="8" fill="#ffdff0" opacity="0.6"/>
              </svg>
          </div>


          <form id="lockForm" class="lock-form" onsubmit="return false;">
          <div class="selectors">
          <select id="day">
          <!-- 1..31 -->
          ${Array.from({length:31},(_,i)=>`<option value="${(i+1).toString().padStart(2,'0')}">${(i+1).toString().padStart(2,'0')}</option>`).join('')}
          </select>
          <select id="month">
          ${Array.from({length:12},(_,i)=>`<option value="${(i+1).toString().padStart(2,'0')}">${(i+1).toString().padStart(2,'0')}</option>`).join('')}
          </select>
          <select id="year">
          <!-- show two-digit years 20..30 -->
          ${['23','24','25','26','27','28','29','30'].map(y=>`<option value="${y}">${y}</option>`).join('')}
          </select>
          </div>

          <div class="hint">Pista: ¬øCu√°ndo nos hicimos novios?</div>
          <button id="unlockBtn" class="btn">Desbloquear</button>
          <p id="msg" class="msg"></p>
          </form>
          </div>

      </main>

        <script>
        // --- valores correctos ---
        const CORRECT = { day: '30', month: '06', year: '25' };

        (function(){
       // Populate selects in case template placeholders were left in the HTML
      const day = document.getElementById('day');
      const month = document.getElementById('month');
      const year = document.getElementById('year');

      if (day) 
        {
          day.innerHTML = Array.from({length:31}, (_, i) =>
          `<option value="${String(i+1).padStart(2,'0')}">${String(i+1).padStart(2,'0')}</option>`
          ).join('');
        }

      if (month) 
        {
          month.innerHTML = Array.from({length:12}, (_, i) =>
          `<option value="${String(i+1).padStart(2,'0')}">${String(i+1).padStart(2,'0')}</option>`
          ).join('');
        }

      if (year) 
        {
          year.innerHTML = ['23','24','25','26','27','28','29','30'].map(y =>
          `<option value="${y}">${y}</option>`
          ).join('');
        }

      const btn = document.getElementById('unlockBtn');
      const msg = document.getElementById('msg');

      if (btn) 
        {
          btn.addEventListener('click', function(e){
          e.preventDefault();
          const d = day ? day.value : '';
          const m = month ? month.value : '';
          const y = year ? year.value : '';

          if (d === CORRECT.day && m === CORRECT.month && y === CORRECT.year) {
              if (msg) 
                {
                  msg.classList.remove('error');
                  msg.classList.add('success');
                  // Mostrar enlace solo cuando est√© desbloqueado
                  msg.innerHTML = '¬°Desbloqueado! <a id="nextLink" href="love.html" class="next-link">Siguiente</a>';
                }
        } else 
            {
              if (msg) 
                {
                  msg.textContent = 'Fecha incorrecta.';
                  msg.classList.remove('success');
                  msg.classList.add('error');
                }
            }
        });
      }
      })();
      </script>
      <!-- Mensaje al hacer click en la p√°gina (compartido con love.html) -->
      <p id="mensaje" class="click-message" role="status" aria-live="polite" aria-atomic="true">¬°Hiciste clic en la p√°gina! üëè</p>
      <script>
        (function(){
          const msg = document.getElementById('mensaje');
          let hideTimeout = null;

          const defaultMessages = [
            'Siempre ser√°s mi reina üëë',
            'Eres mi todo üíñ',
            'Contigo, todo tiene sentido ‚ú®',
            'Te amo hoy y siempre üíò',
            'Eres mi raz√≥n de sonre√≠r üòä',
            '¬øPara cu√°ndo unos clashitos? xd üì±',
            'Si ves esto mandame un mensaje üòò',
            'Eres la estrella m√°s brillante üåü',
            'Eres mi persona favorita en el mundo üåç',
            'Cada d√≠a contigo es una aventura üó∫Ô∏è',
            'Te llevaria hasta la luna üåô',
          ];

          window.mostrarTexto = function(ev){
            if(!msg) return;
            if(ev && ev.target && ev.target.closest && ev.target.closest('a, button, input, textarea, select, label')) return;

            let x = window.innerWidth / 2;
            let y = window.innerHeight / 2;
            if(ev && typeof ev.clientX === 'number'){
              x = ev.clientX; y = ev.clientY;
            } else if(ev && ev.touches && ev.touches[0]){
              x = ev.touches[0].clientX; y = ev.touches[0].clientY;
            }

            let messages = defaultMessages;
            try{
              const attr = msg.getAttribute('data-messages');
              if(attr){
                if(attr.trim().startsWith('[')) messages = JSON.parse(attr);
                else messages = attr.split('|').map(s=>s.trim()).filter(Boolean);
              }
            }catch(e){}
            msg.textContent = messages[Math.floor(Math.random()*messages.length)];

            msg.classList.remove('visible');
            msg.style.left = '0px'; msg.style.top = '0px';

            const place = ()=>{
              const mw = msg.offsetWidth || 120; const mh = msg.offsetHeight || 32; const padding = 8;
              const minCenterX = padding + mw/2; const maxCenterX = window.innerWidth - padding - mw/2;
              const centerX = Math.max(minCenterX, Math.min(maxCenterX, x));
              let desiredTop = y - mh - 12; if(desiredTop < padding) desiredTop = y + 12;
              const maxTop = window.innerHeight - mh - padding; desiredTop = Math.max(padding, Math.min(maxTop, desiredTop));
              msg.style.left = centerX + 'px'; msg.style.top = desiredTop + 'px';
              msg.classList.add('visible'); clearTimeout(hideTimeout); hideTimeout = setTimeout(()=> msg.classList.remove('visible'), 2500);
            };

            if(msg.offsetWidth === 0) requestAnimationFrame(place); else place();
          };

          window.addEventListener('keydown', (e)=>{ if(e.code==='Enter'||e.code==='Space'||e.key===' '){ const active=document.activeElement; if(active&&(active.tagName==='INPUT'||active.tagName==='TEXTAREA'||active.isContentEditable)) return; mostrarTexto(); }});
          msg.addEventListener('click', ()=>{ msg.classList.remove('visible'); clearTimeout(hideTimeout); });
        })();
      </script>
  </body>
</html> 